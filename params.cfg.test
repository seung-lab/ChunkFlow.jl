[gn]
# general section
# temporary folder in local node
tmp_dir = /tmp/

# raw image file name,
# gray image, bit depth should be 8
# support tif and hdf5 (dataset name is "/main")
fimg = s3://znn/dataset/allen/Allen03_raw.h5

# voxel size: x,y,z
voxel_size = 4,4,40

# affinit file, default: out_sample1_output.h5 in tmp folder
faffs = /tmp/affs.h5

# segmentation with dendrogram
fsegm = /tmp/segm.h5

# shutdown maching after pipeline: yes | no
# if you run it in aws, please always set it as yes
is_auto_shutdown = no

[znn]
# whether to run forward pass
is_znn = yes

### znn forward
# directory of znn
dir = /opt/znn-release

# net architecture specifications
fnet_specs = s3://znn/networks/VD2D.znn, s3://networks/VD2D3D.znn

# networks
fnets = s3://znn/experiments/allen/VD2D/net_current.h5, s3://znn/experiments/allen/W3/net_current.h5

# standard io, this should match with the setting in znn training config.cfg file
# default is no
is_stdio = yes

# output size of each epoch, z,y,x
outszs = 1, 250, 250; 1, 100, 100

# whether overwrite the existing affinity file or not
# options: yes, no
is_overwrite = yes

[ws]
# watershed section
# weather to run watershed or not
is_watershed = yes

# exchange x and z channel or not
# current network output affinity as z,y,x, so we need to exchange x and z channel to  make sure that the affinity is organized as x,y,z
is_exchange_affs_xz = no
# whether remap to uniform distribution or not
# options: yes, no
is_remap = yes
# watershed parameters
high = 0.80
low = 0.3
# thresholds example: 256,0.3; 500,0.5
thresholds = 1000,0.3
dust = 2000

[agg]
# aggromeration
is_agg = no

[omni]
# weather to do omnification or not
is_omni = yes

# the path of omnify executable file
ombin = /opt/omni

# the save path of omni projects, should be local. Remote path may make the segmentation empty.
fomprj = s3://seunglab/spipe/omni_prjs/tmp.omni
